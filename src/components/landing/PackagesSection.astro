---
import { CheckCircle2, ArrowRight, Package } from "lucide-react";

// The 'packages' data will be passed in as a prop from index.astro
const { packages } = Astro.props;
---

<section id="packages" class="py-24 bg-slate-50 relative">
    <div class="container mx-auto px-6 relative z-10">
        <div class="text-center mb-16 max-w-2xl mx-auto">
            <div
                class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-100 text-blue-700 text-xs font-bold mb-4"
            >
                <Package size={14} /> Our Pricing
            </div>
            <h2 class="text-4xl font-bold text-slate-900 mb-4">
                Simple Plans for Real Growth
            </h2>
            <p class="text-slate-500 text-lg">
                Choose the plan that fits your business goals. No hidden fees.
            </p>
        </div>

        <div
            class="grid md:grid-cols-2 xl:grid-cols-3 gap-6 lg:gap-8 items-start"
        >
            {
                packages.map((pkg: any) => (
                    <div
                        class:list={[
                            "relative bg-white rounded-2xl p-8 transition-all duration-300 hover:-translate-y-2 flex flex-col h-full",
                            {
                                "border-2 border-blue-600 shadow-2xl shadow-blue-600/10 z-10 scale-100 md:scale-105":
                                    pkg.data.isPopular,
                                "border border-slate-200 hover:shadow-xl hover:border-blue-200":
                                    !pkg.data.isPopular,
                            },
                        ]}
                    >
                        {pkg.data.isPopular && (
                            <div class="absolute -top-4 left-1/2 -translate-x-1/2 bg-blue-600 text-white text-[10px] font-bold uppercase tracking-widest px-4 py-1.5 rounded-full shadow-lg">
                                Most Popular
                            </div>
                        )}

                        <div class="mb-6">
                            <h3 class="text-xl font-bold text-slate-900 mb-2">
                                {pkg.data.title}
                            </h3>
                            <p class="text-sm text-slate-500">
                                {pkg.data.tagline}
                            </p>
                        </div>

                        <div class="flex items-baseline gap-1 mb-8">
                            <span class="text-4xl font-black text-slate-900 tracking-tight">
                                {pkg.data.price}
                            </span>
                            <span class="text-slate-400 font-medium">
                                /month
                            </span>
                        </div>

                        <div class="w-full h-px bg-slate-100 mb-8" />

                        <ul class="space-y-4 mb-8 flex-grow">
                            {pkg.data.features.map((feature: string) => (
                                <li class="flex items-start gap-3 text-sm text-slate-600 font-medium">
                                    <CheckCircle2
                                        size={18}
                                        class:list={[
                                            "shrink-0 mt-0.5",
                                            pkg.data.isPopular
                                                ? "text-blue-600"
                                                : "text-slate-400",
                                        ]}
                                    />
                                    <span class="leading-tight">{feature}</span>
                                </li>
                            ))}
                        </ul>

                        <a
                            href="#contact"
                            class:list={[
                                "w-full py-4 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 group",
                                {
                                    "bg-blue-600 text-white hover:bg-blue-700 shadow-lg shadow-blue-600/30":
                                        pkg.data.isPopular,
                                    "bg-slate-100 text-slate-700 hover:bg-slate-200":
                                        !pkg.data.isPopular,
                                },
                            ]}
                        >
                            Choose This Plan{" "}
                            <ArrowRight
                                size={16}
                                class="group-hover:translate-x-1 transition-transform"
                            />
                        </a>
                    </div>
                ))
            }
        </div>
    </div>
</section>
